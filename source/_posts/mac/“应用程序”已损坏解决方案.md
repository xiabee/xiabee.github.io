---
title: “应用程序”已损坏解决方案
date: 2023-4-19 18:00:23
tags:
  - mac
categories:
  - coding
abbrlink: app-error
---



## 问题

如果没有折腾过 mac，可能会在某次更新之后无法打开浏览器下载的可执行文件：

<img src="https://s3.xiabee.cn/pic/2023/04/c108d51a7d3baa8028cd6da793a5f01ff5f79461fc2675cf3e57712ca0a69f89.png" alt="image-20230419182946008" style="zoom:50%;" />

这里给几个比较有效的解决方法。



## 直接允许 “任何来源” App 运行

老版本的 macOS 教程里会提醒你在安全性与隐私里面设置，允许 “任何来源” 的位置下载 APP：

![allow-anywherep](https://s3.xiabee.cn/pic/2023/04/1bd04dfc74a3e7cdb09353d123c1a9a07d0feb3f336c644f2a8c86164e9038a8.webp)



但是新版的 macOS 默认没有这个选项：

![image-20230419183349301](https://s3.xiabee.cn/pic/2023/04/c36efa13ee9f357f099442a51010e3a3d9ed70d8265d60424f40090fdf475685.png)



此时需要执行以下命令，以显示 “任何来源”：

```bash
sudo spctl --master-disable
```

重新打开 “隐私与安全性”，就能看到了：

![image-20230419183746564](https://s3.xiabee.cn/pic/2023/04/2345c2038b306a762c9067c0f43de3af5b71d54b7f76dc2b41c0655d5bbadd8a.png)



如需关闭显示任何来源：

```bash
sudo spctl --master-enable
```

![image-20230419183853728](https://s3.xiabee.cn/pic/2023/04/19293214b6f124b519fcd9f5bd1d5fdbee1b5ed95f4213f073d9681c30e7e16e.png)



如果对 macOS 终端操作不熟练的话，建议到此为止，下面的操作留给有需要的人（x）



## 移除应用的安全隔离属性

```bash
sudo xattr -dr com.apple.quarantine /Applications/${name.app}
## ${name.app} 为需要移除安全隔离的程序
```



## 重签名

如果因为证书不被 macOS 信任，可以制作/寻找一个 macOS 信任的证书，然后重新打包签名：

```bash
codesign --force --deep --sign - /Applications/${name.app}
## ${name.app} 为重签名的程序
```

至于怎么拿到/制作出 macOS 信任的证书......各凭本事（x）



## Reference

> https://sysin.org/blog/macos-if-crashes-when-opening

